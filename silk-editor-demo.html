<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="silk-editor.html">

<!--
`silk-editor-demo`


@demo demo/index.html
-->

<dom-module id="silk-editor-demo">
  <template>
    <style>
        article {
          display: inline-block;
          outline: none;
        }

        blockquote {
          font-size: 24px;
        }

        blockquote:before, blockquote:after {
          content: '"';
        }
    </style>

    <silk-editor
      for="article"
      editing="{{editing}}"
      content="{{content}}"
    ></silk-editor>

    <article
      id="article"
      contenteditable="true"
      spellcheck="false"
      on-input="_htmlChanged"
      on-focus="_handleFocus"
      on-blur="_handleBlur"
    ></article>
  </template>

  <script>
    /**
     * `silk-editor-demo`
     * Demo Element
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class SilkEditorDemo extends Polymer.Element {
      static get is() { return 'silk-editor-demo'; }
      static get properties() {
        return {

          editing: {
            type: Boolean
          },

          content: {
            type: String,
            observer: '_contentChanged'
          },

          _focused: {
            type: Boolean,
            value: false
          }

        }
      }

      _contentChanged(content) {
        if(this.editing || this._focused) return;
        var $article = this.shadowRoot.querySelector('#article');
        $article.innerHTML = content;
      }

      _htmlChanged(evt) {
        this.content = evt.target.innerHTML;
      }

      _handleFocus() {
        this._focused = true;
      }

      _handleBlur() {
        this._focused = false;
      }

    }

    window.customElements.define(SilkEditorDemo.is, SilkEditorDemo);
  </script>
</dom-module>
